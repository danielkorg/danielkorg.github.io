Deep Vocal Attractor
-------------------------

v1.0 - July 9, 2018

- baseline framework

-------------------------

Small guide on functions:

-------------------------

1) System requirements:

The program was developed under MATLAB R2018a engine
and on Windows 7 64-bit system, using 8GB RAM, then
ported to mac OS and Linux.

You will need an operating system with a 64-bit processor
and around 8GB RAM. The CPU doesn't have to be fast, but keep
in mind, the faster it is, the less time you have to wait for
the algorithm to process the audio mixture.

I am using a fast i7 processor and I usually process a 1 minute
mixture in about 3-4 seconds. Then again, the very first time you
process will always be longer. If you keep the program opened and
redo the processing, it will take less time.

If you have MATLAB R2018a, then you are good to go. If not, you don't
need to buy MATLAB, but instead just need to get the free R2018a
runtime library, which you can get from this link:

https://www.mathworks.com/products/compiler/matlab-runtime.html

Make sure to get the correct version: R2018a (9.4)
for your operating system.

Linux version might need additional path settings:
at the end of the Runtime Library installer, follow the
instructions for the path and then run the file called
"run_DVA.sh".

Then, the application DVA should run if you have the above.
If not, contact me on Github or/and email.

-------------------------

2) Program functions:

This is the main part of this Guide. I will explain what the
program parameters do and how it affects your mixture for
separating speech and music. I will also explain how to use
this program and improve the results of the separation.

First and foremost, this app was developed primarily for speech
separation, however, with careful tuning of the parameters, one
can also manage to separate singing vocals. This is why I used
the word Vocal in the name and not just Speech or Singing, etc.

It is called Deep, because it uses a cascading algorithm. So
the mixture is decomposed into smaller fragments where each is
processed in a certain way and then once done, the 2 outputs
are reconstructed.

It is called Attractor, because the way it isolates the vocal
component, it does it in VERY high quality, like a magnet while
keeping away the non-speech elements. The app will improve,
this is by no means the ONLY or FINAL version of this app.

Keep in mind, this application assumes one MAJOR thing about
your mixture. It is COMPLEX in sounds in terms of background.
In other words, if you use this app on simple tasks such as
wind removal, traffic, white noise, etc, it might work, might
not. This app was carefully designed for COMPLEX backgrounds.

With this in mind, let's finally have some fun! :)

I am not gonna lie, this current interface is bad, but hey, this
is my first program EVER! :)

When you first open the app, you might wonder where do you
start. Well, let's go step by step of how I use this app and at the
same time, explain the parameters.

First thing to do is to load/open your stereo WAV file from the upper
left button called "Open Stereo WAV". Keep in mind, for this version,
and based on user request, I can make it work with mp3 or other formats.
Also, you do not have to worry about the stereo WAV sampling frequency
or/and number of bits. The app works with any combo and outputs the 
speech and music in the same format as the input signal. So if you opened
a stereo wav file with 16bit 44.1kHz, the outputs will be 16bit 44.1kHz
and the two files ADD UP to the original mixture you provided, so no loss
in audio samples.

To verify the mixture is loaded in the app, click the "Preview Original"
button at the top to hear the mixture you just loaded. At any time, and
not just here, you can stop a preview by clicking the "Stop Preview" button
next to it.

The way the app is designed, it keeps the settings and wav files in memory.
In other words, if you decide at any moment to load a different wav file,
you do not have to close the app and re-open it, you can simply just load
it and just to make sure, preview it and then go from there.

The app has two steps of processing, called "Step 1" and "Step 2". Step 2 will
only unlock after you did at least one time the Step 1 process. From there, it
will remain unlocked for a very specific reason that I will explain later.

This is very important!!!!
Before you click Step 1, keep in mind the app default parameters are general purpose
parameters. They should work with everything nicely, but not always. So if you see
something doesn't sound right, slightly change the parameters. I will explain later
anyway.

5 parameters affect the first stage of separation (Step 1):

- Resolution
If you set to a high resolution, you can suppress more speech. Depending on what you
want to achieve with this app, I kept low resolutions also. But generally, you want
at least 8192 (default).

- Power
This is sort of the compression of the mixture. If you set it to a high number, for
example default 5, it will compress the mixture or concentrate it. This is useful
if the mixture has transient components. It is also useful to suppress ghosting effects
from the speech. The speech leaks into the music, you hear sort of the ghost of the speech
signal. Generally, keep it high value.

- Stable Factor
This factor controls the harmonics of the mixture. You want a decent number here, not too high,
not too low. From my own experiments, around 20 is perfect. Again, there are just SO MANY
possible combinations that maybe you will discover better results than what I did! :)

- Speech Factor
This factor controls the speech that you will isolate in the first step. This will then
be processed in the Step 2. Again, from experiments, around half of the value of the
Stable Factor (10) should be good for most cases, but feel free to try other values!

- Noise Factor
This factor controls elements that are not considered harmonic, yet don't share speech features.
The default value of 1.3 was found by experimenting, but this is actually an interesting parameter
that needs more testing, perhaps you will discover something with it!

Once these are set, click the "Step 1" button and a waitbar will appear. Wait till the waitbar
closes, and the Step 2 button will be now unlocked. This is how you know you finished Step 1
processing and are ready for Step 2.

BUT WAIT!!!!
Notice the upper right button called "Preview before Step 2" ?
This is something VERY useful that I put there. Before wasting time in Step 2, why not possibly
improve Step 1? When you finish processing Step 1, click that button to hear the current
separation. This will only play the current background, not the speech. This is useful
to know if you are doing the right thing with the parameters. If you still hear some speech,
re-adjust the parameters and click the Step 1 button again to process with the new settings.
You can do this at any time! And preview before going to Step 2. If you are happy with the
current results, let's go to the final step, Step 2!

Step 2 has 3 main parameters and an optional one. Then again, the others are optional too
if you set them to zero.

- Center Resolution
The mixture will be divided into center and sides. Since speech and almost all singing vocals
are generally mixed in the center when you listen to a stereo mixture, this is useful to separate
the side components you do not need. The resolution here has the same meaning as the main resolution
from Step 1. Higher values give you better results. Then again, experiment on your own!

- Center Width
How much center is extracted? If zero, no center is extracted, not very useful right? Usually speech
is within a range of 0.1-0.3 while singing vocals can be higher like 0.6-0.8. Try it out.

- Bass
Set to 0, if you don't want to extract any bass components from the background music. Otherwise, try
to find a decent value. This value is in Hz. Generally, 150Hz makes sense, then again if you hear
bass coming from speech, then decrease it slightly. This is very easy to understand.

- VAD and VAD Threshold
This is the optional one.
Vocal Activity Detection (VAD) is the final step after all of these. Keep in mind, default is turned OFF.
Flip the switch to ON if you want to use it for the Step 2 processor.

This is not always useful. It is mainly useful if you still hear low energy components in the isolated
speech, this can help you remove them and keep the speech. But, this suppression is controlled by the
Threshold value. The default value works for most cases, not too harsh suppression, not too soft. Be
really careful how you set this Threshold. Certain values will be too aggressive and cut some speech
samples. Again, only use this if you really feel like it is needed. Keep in mind, this is a first basic
VAD. I am planning on implementing a better one that works with not just low energy but high energy
components.

At any time, click Step 2 button to do the final processing, regardless of VAD switch. Re-adjust values
and click again and again until you are happy with the final two outputs that you can hear from the
"Preview Speech" and "Preview Music" buttons. If happy, then use the "Save Speech" and "Save Music"
buttons to save the isolated/processed stereo components to some directory on your local drive.
Like I said at the beginning, if you had input WAV of 16bit 44.1 kHz quality, this is exactly what you
will get as quality for the output AND the two components SUM to the original mixture you provided,
so nothing is lost in the processing!

So this is how I use this app and settings, there are just too many mixtures and combinations possible
to really understand everything. I am always discovering new greatness every day!

Finally, keep in mind this app will improve. So if you think this is good, just wait....
On that note, this app is currently not great when a lot of transients (drums) are present
or/and when the speech in the mixture has a reverb effect applied on it or/and when sound
effects are randomly inserted or/and overlapping speech. These things will be investigated
for the next version hopefully.

If you have suggestions for the app itself, features you want to see, etc, just contact me.
Github or email.

Thank you for using my app, I hope it helps you in your projects! :)

-more apps coming soon! -

